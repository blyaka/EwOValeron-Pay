{% load static %}

<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {% block title %}
    <title>EVO PAY — цифровые услуги для Raid: Shadow Legends</title>
    {% endblock title %}

    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'/%3E">

    <link rel="stylesheet" href="{% static 'css/pages/base.css' %}">

    {% block styles %}

    {% endblock styles %}
</head>

<body>

    <header class="site-header">
        <div class="container nav" role="navigation" aria-label="Основная навигация">
            <a class="brand" href="{% url 'home' %}">
                <span class="logo" aria-hidden="true"></span>
                <span>EVO PAY</span>
            </a>

            <button class="burger" id="burgerBtn" aria-label="Открыть меню" aria-expanded="false"
                aria-controls="mobileMenu">
                <span class="bar"></span>
            </button>

            <nav class="menu">
                <a href="{% url 'home' %}" aria-current="page">Главная</a>
                <a href="{% url 'catalog' %}" aria-current="page">Каталог товаров</a>
                <a href="{% url 'account_login' %}" class="btn">Личный кабинет</a>
            </nav>

            <div class="mobile-menu" id="mobileMenu" hidden>
                <a href="{% url 'home' %}" class="mm-link">Главная</a>
                <a href="{% url 'catalog' %}" class="mm-link">Каталог товаров</a>
                <a href="{% url 'account_login' %}" class="mm-link btn">Личный кабинет</a>
            </div>
        </div>
    </header>

    <script>
        (function () {
            const btn = document.getElementById('burgerBtn');
            const panel = document.getElementById('mobileMenu');
            if (!btn || !panel) return;

            const lock = on => {
                document.documentElement.style.overflow = on ? 'hidden' : '';
                document.body.style.overflow = on ? 'hidden' : '';
            };

            const closeOnEscape = e => { if (e.key === 'Escape') btn.click(); };

            btn.addEventListener('click', () => {
                const open = btn.getAttribute('aria-expanded') === 'true';
                btn.setAttribute('aria-expanded', String(!open));
                panel.classList.toggle('is-open', !open);
                panel.toggleAttribute('hidden', open);
                lock(!open);
                if (!open) document.addEventListener('keydown', closeOnEscape);
                else document.removeEventListener('keydown', closeOnEscape);
            });

            panel.addEventListener('click', e => {
                const a = e.target.closest('a');
                if (a) {
                    btn.setAttribute('aria-expanded', 'false');
                    panel.classList.remove('is-open');
                    panel.setAttribute('hidden', '');
                    lock(false);
                }
            });

            window.addEventListener('resize', () => {
                if (window.innerWidth > 960) {
                    btn.setAttribute('aria-expanded', 'false');
                    panel.classList.remove('is-open');
                    panel.setAttribute('hidden', '');
                    lock(false);
                }
            });
        })();
    </script>


    {% block content %}

    {% endblock content %}



    <footer class="site-footer">
        <div class="container f-grid">
            <div>© 2020 - 2025 EVO PAY. Все права защищены.</div>
            <nav class="f-links" aria-label="Юридическая информация">
                <a href="{% static 'files/privacy_policy.pdf' %}" target="_blank" rel="noopener">Политика
                    конфиденциальности</a>
                <a href="{% static 'files/public_offer.pdf' %}" target="_blank" rel="noopener">Публичная оферта</a>
            </nav>
        </div>
    </footer>





    <script src="https://unpkg.com/lenis@1.3.11/dist/lenis.min.js"></script>
    <script>
        if (!matchMedia('(prefers-reduced-motion: reduce)').matches) {
            let useLenis = false;

            window.addEventListener("wheel", function detectDevice(e) {
                if (Math.abs(e.deltaY) >= 50) {
                    useLenis = true;
                } else {
                    useLenis = false;
                }

                if (useLenis && !window.lenis) {
                    const lenis = new Lenis({
                        duration: 1.3,
                        smoothWheel: true,
                        normalizeWheel: true
                    });

                    function raf(t) {
                        lenis.raf(t);
                        requestAnimationFrame(raf);
                    }
                    requestAnimationFrame(raf);
                    window.lenis = lenis;
                }
                window.removeEventListener("wheel", detectDevice);
            }, { passive: true });
        }
    </script>
</body>

</html>